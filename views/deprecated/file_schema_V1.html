<div class="w3-panel" id="schema_panel--{{database.filename}}">
    <p>Schema Information &emsp;&emsp;
        <span id="schema_icon--{{database.filename}}" class="w3-button w3-light-grey w3-padding w3-section">
            <i class="far fa-minus-square"></i>
        </span>
    </p>
    <div class="w3-panel" id="detail_schema_panel--{{database.filename}}">
        <h5><i class="fa fa-cube w3-text-green w3-large"></i> {{database.filename}} &emsp;
            <span class="badge bg-primary rounded-pill">{{database.dimensions.length}} {{session=='Expert'?
                'Dimensions':'Axis'}} </span>
        </h5>
        <nav>
            <div class="nav nav-tabs" id="nav-tab" role="tablist">
                {{each database.dimensions dim indexdim}}
                {{if indexdim==0}}
                <button class="nav-link active text-uppercase" id="nav-{{dim.name}}-tab" data-bs-toggle="tab"
                    data-bs-target="#nav-{{dim.name}}" type="button" role="tab" aria-controls="nav-{{dim.name}}"
                    aria-selected="true">{{dim.name}}</button>
                {{else}}
                <button class="nav-link text-uppercase" id="nav-{{dim.name}}-tab" data-bs-toggle="tab"
                    data-bs-target="#nav-{{dim.name}}" type="button" role="tab" aria-controls="nav-{{dim.name}}"
                    aria-selected="false">{{dim.name}}</button>
                {{/if}}
                {{/each}}
            </div>
        </nav>


        <div class="overflow-scroll mb-3" style="height:400px;">
            <div class="tab-content" id="nav-tabContent">
                {{each database.dimensions dim indexdim}}
                <div class="tab-pane fade {{if indexdim==0}} show active {{/if}}" id="nav-{{dim.name}}" role="tabpanel"
                    aria-labelledby="nav-{{dim.name}}-tab" tabindex="0">

                    {{if dim.name == 'Date' || dim.name == 'DATE' || dim.name == 'date'}}
                    <p>You can select the attributes for the {{session=="Expert"? 'hierarchies': 'levels'}} about the
                        date.
                    </p>
                    <!-- Button trigger modal -->
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                        data-bs-target="#select_date_modal">Select
                    </button>
                    <!-- Vertically centered scrollable modal -->
                    <div class="modal fade" id="select_date_modal" tabindex="-1"
                        aria-labelledby="select_date_modal_label" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="select_date_modal_label">Select date hierarchy
                                        attributes
                                    </h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <p id="p_select_date--{{database.filename}}">Select &emsp;&emsp;
                                        <label class="form-check-label">
                                            None
                                        </label>
                                        <input type="checkbox" name="select_date"
                                            id="select_date--{{database.filename}}" checked>
                                        <label class="form-check-label">
                                            All
                                        </label>
                                    </p>
                                    <form id="select_date_form--{{database.filename}}"
                                        name="select_date_form--{{database.filename}}" method="post"
                                        action="/file/hie/date/{{database.filename}}">
                                        <input class="form-check-input" type="checkbox" name="date" id="date_date"
                                            form="select_date_form--{{database.filename}}" checked>
                                        <label class="form-check-label" for="date_date">
                                            Date
                                        </label>
                                        <input class="form-check-input" type="checkbox" name="date" id="date_week"
                                            form="select_date_form--{{database.filename}}" checked>
                                        <label class="form-check-label" for="date_week">
                                            Week
                                        </label>
                                        <input class="form-check-input" type="checkbox" name="date" id="date_month"
                                            form="select_date_form--{{database.filename}}" checked>
                                        <label class="form-check-label" for="date_month">
                                            Month
                                        </label>
                                        <input class="form-check-input" type="checkbox" name="date" id="date_season"
                                            form="select_date_form--{{database.filename}}" checked>
                                        <label class="form-check-label" for="date_season">
                                            Season
                                        </label>
                                        <input class="form-check-input" type="checkbox" name="date" id="date_semester"
                                            form="select_date_form--{{database.filename}}" checked>
                                        <label class="form-check-label" for="date_semester">
                                            Semester
                                        </label>
                                        <input class="form-check-input" type="checkbox" name="date" id="date_year"
                                            form="select_date_form--{{database.filename}}" checked>
                                        <label class="form-check-label" for="date_year">
                                            Year
                                        </label>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Cancel</button>
                                    <button type="button" class="btn btn-primary" id="btn_date">Save</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end of Modal -->

                    {{/if}}
                    <hr>
                    <table class="table table-striped table-hover">
                        <tr>
                            <th width="20%">
                                {{session=='Expert'? 'Dimension':'Axis'}} {{indexdim + 1}} <br>
                                <span class="w3-text-grey" style="font-size: 10px;"> {{dim.hierarchies.length}}
                                    {{session=='Expert'? 'Hierarchies':'Level'}}</span>
                            </th>
                            <th>
                                {{dim.name}}
                            </th>
                        </tr>
                        <tr>
                            <th width="20%">
                                Attributes <br>
                                <span class="w3-text-grey" style="font-size: 10px;"> {{dim.attributes.length}}
                                    Attributes</span>
                            </th>
                            <td>
                                {{each dim.attributes a indexA}}
                                {{if indexA==dim.attributes.length-1}} {{a}} {{else}} {{a + ", "}} {{/if}}
                                {{/each}}
                            </td>
                        </tr>
                        <tr id="all_hie--{{dim.name}}" style="text-align: center;">
                            <th colspan="2">
                                <div class="row justify-content-around">
                                    <div class="col-4">
                                        {{session=='Expert'? 'Hierarchy':'Level'}}
                                        <span class="badge bg-primary rounded-pill"> {{dim.hierarchies.length}}</span>
                                    </div>
                                    <div class="col-4">
                                        <i class="fa fa-caret-up"></i>
                                    </div>
                                </div>
                            </th>
                        </tr>
                        {{each dim.hierarchies h indexh}}
                        <tr>
                            <th width="20%">
                                {{session=='Expert'? 'Hierarchy':'Level'}} {{indexh + 1}}

                                <i width="30px" height="30px" viewBox="0 0 20 20" class="fa fa-info-circle"
                                    data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="true"
                                    data-bs-title="In this axis, you have following analysis visions."></i>

                            </th>
                            <td id="hie--{{dim.name + '_' + indexh}}">
                                <div class="row justify-content-between">
                                    <div class="col-4">
                                        {{h.name}}
                                    </div>
                                    <div class="col-4">
                                        <i class="fa fa-caret-up">
                                        </i>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr class="detail_hie--{{dim.name + '_' + indexh}}">
                            <th width="20%">
                                - Paramter <i width="30px" height="30px" viewBox="0 0 20 20"
                                    class="fa fa-info-circle w3-padding" data-bs-toggle="tooltip"
                                    data-bs-placement="top" data-bs-html="true"
                                    data-bs-title="In this vision, you have following analysis levels."></i>
                            </th>
                            <td>
                                {{each h.parametres p indexP}}
                                {{p}}{{indexP!==h.parametres.length-1 ? ", ":""}}
                                {{/each}}
                            </td>
                        </tr>
                        <tr class="detail_hie--{{dim.name + '_' + indexh}}">
                            <th width="20%">
                                - Weak Attributes <i width="30px" height="30px" viewBox="0 0 20 20"
                                    class="fa fa-info-circle" data-bs-toggle="tooltip" data-bs-placement="top"
                                    data-bs-html="true"
                                    data-bs-title="The level contain following supplementary information."> </i>
                            </th>
                            <td>
                                {{each h.weak_att wka indexWKA}}
                                {{wka.name}}: {{each wka.wk w indeW}} {{w}} {{indeW!==wka.wk.length-1? "," : ""}}
                                {{/each}}
                                {{if indexWKA!==h.weak_att.length-1}},{{/if}}
                                {{/each}}
                            </td>
                        </tr>
                        {{/each}}
                    </table>
                </div>
                {{/each}}
            </div>
        </div>

        <!-- Button trigger modal -->
        <!-- button 1 Edit Schema -->
        <button id="open_edit_schema_modal--{{database.filename}}" type="button" class="btn btn-primary"
            data-bs-toggle="modal" data-bs-target="#edit_schema_modal--{{database.filename}}">
            Edit Schema
        </button>
        <!-- button 2 Confirme to Create DB -->
        <button id="btn_createdb_modal--{{database.filename}}" type="button" class="btn btn-primary"
            data-bs-toggle="modal" data-bs-target="#createdb_modal--{{database.filename}}">
            Create Database
        </button>

        <!-- edit schema modal -->
        <div class="modal fade" id="edit_schema_modal--{{database.filename}}" tabindex="-1"
            aria-labelledby="edit_schema_modal--{{database.filename}}" aria-hidden="true">
            <div class="modal-dialog modal-fullscreen">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="edit_schema_modal--{{database.filename}}"> Enter the database
                            information
                        </h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <textarea class="form-control" id="message-text" name="schema"
                                form="edit_schema_form--{{database.filename}}" hight="80%"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <form id="edit_schema_form--{{database.filename}}"
                            name="edit_schema_form--{{database.filename}}" method="post"
                            action="/file/schema/edit/{{database.filename}}">
                            <button type="button" class="btn btn-primary"
                                id="btn_edit_schema--{{database.filename}}">Save changes</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- end of Modal 1-->

        <!-- Create DB Information Modal 2-->
        <div class="modal fade" id="createdb_modal--{{database.filename}}" tabindex="-1"
            aria-labelledby="createdb_modal--{{database.filename}}" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="createdb_modal--{{database.filename}}"> Enter the database
                            information
                        </h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3 row">
                            <label for="createUser" class="col-sm-4 col-form-label">User Name</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" id="username--{{database.filename}}" name="username"
                                    form="createdb_form--{{database.filename}}">
                            </div>
                        </div>
                        <div class="mb-3 row">
                            <label for="createPassword" class="col-sm-4 col-form-label">Enter Password</label>
                            <div class="col-sm-6">
                                <input type="password" class="form-control" id="createPassword" name="password">
                            </div>
                        </div>
                        <div class="mb-3 row">
                            <label for="pwd--{{database.filename}}" class="col-sm-4 col-form-label">Confirm
                                Password</label>
                            <div class="col-sm-6">
                                <input type="password" class="form-control" id="pwd--{{database.filename}}" name="pwd"
                                    form="createdb_form--{{database.filename}}"></td>
                            </div>
                        </div>
                        <div class="mb-3 row">
                            <label for="dbname--{{database.filename}}" class="col-sm-4 col-form-label">Warehouse
                                Name</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" id="dbname--{{database.filename}}" name="dbname"
                                    form="createdb_form--{{database.filename}}">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <form id="createdb_form--{{database.filename}}" name="createdb_form--{{database.filename}}"
                            method="post" action="/filusername--{{database.filename}}e/adddb/{{database.filename}}">
                            <button type="button" class="btn btn-primary"
                                id="btn_createdb_save--{{database.filename}}">Save</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Create DB Modal 2-->

        <br>
        <button class="w3-button w3-light-grey w3-padding-large w3-section" id="btn_schema_pre--{{database.filename}}"
            type="button">
            <a href="#measure_panel--{{database.filename}}" style="text-decoration: none">
                <i class="fa fa-arrow-left"></i> Return
            </a>
        </button>
        <button class="w3-button w3-light-grey w3-padding-large w3-section" id="btn_schema--{{database.filename}}"
            type="button">
            Next <i class="fa fa-arrow-right"></i>
        </button>
    </div>
    <script src="../static/js/file_schema.js"></script>
</div>